<html>

<head>
    View
</head>

<body>
    <%=table %><br />
    <a href="../add/<%=table %>">Add <%=table %></a>
    <a href="/edit<%=table %>">Edit <%=table %></a>
    <% if (tableSQL.length > 0) { %>
    <table border="1">
        <% if (table == "customer") { %>
        <tr>
            <th>cus_id</th>
            <th>first_name</th>
            <th>last_name</th>
            <th>email</th>
            <th>address</th>
            <th>postal_code</th>
            <th>handphone</th>
            <th>date_of_birth</th>
            <th>job_title</th>
            <th>company</th>
            <th>annual_salary</th>
            <th>username</th>
            <th>password</th>
            <th>Edit</th>
        </tr>
        <% tableSQL.forEach((customer) => { %>
        <tr>
            <td><%= customer.cus_id %></td>
            <td><%= customer.first_name %></td>
            <td><%= customer.last_name %></td>
            <td><%= customer.email %></td>
            <td><%= customer.address %></td>
            <td><%= customer.postal_code %></td>
            <td><%= customer.handphone %></td>
            <td><%= customer.date_of_birth %></td>
            <td><%= customer.job_title %></td>
            <td><%= customer.company %></td>
            <td><%= customer.annual_salary %></td>
            <td><%= customer.username %></td>
            <td><%= customer.password %></td>
            <td><a href="/admin/edit/<%=table %>?id=<%= customer.cus_id %>">edit</a></td>
        </tr>
        <% }) %>
        <% } %>

        <% if (table == "staff") { %>
        <tr>
            <th>staff_id</th>
            <th>first_name</th>
            <th>last_name</th>
            <th>email</th>
            <th>position</th>
            <th>department_id</th>
            <th>username</th>
            <th>password</th>
            <th>Edit</th>
        </tr>
        <% tableSQL.forEach((staff) => { %>
        <tr>
            <td><%= staff.staff_id %></td>
            <td><%= staff.first_name %></td>
            <td><%= staff.last_name %></td>
            <td><%= staff.email %></td>
            <td><%= staff.position %></td>
            <td><%= staff.department_id %></td>
            <td><%= staff.username %></td>
            <td><%= staff.password %></td>
            <td><a href="/admin/edit/<%=table %>?id=<%= staff.staff_id %>">Edit</a></td>
        </tr>
        <% }) %>
        <% } %>

        <% if (table == "loan") { %>
        <tr>
            <th>loan_id</th>
            <th>loan_type_id</th>
            <th>account_id</th>
            <th>approver_id</th>
            <th>status</th>
            <th>remarks</th>
            <th>loan_amount</th>
            <th>outstanding_amount</th>
            <th>start_date</th>
            <th>end_date</th>
            <th>date_of_application</th>
            <th>approve_on_date</th>
            <th>Edit</th>
        </tr>
        <% tableSQL.forEach((loan) => { %>
        <tr>
            <td><%= loan.loan_id %></a></td>
            <td><%= loan.loan_type_id %></td>
            <td><%= loan.account_id %></td>
            <td><%= loan.approver_id %></td>
            <td><%= loan.status %></td>
            <td><%= loan.remarks%></td>
            <td><%= loan.loan_amount %></td>
            <td><%= loan.outstanding_amount %></td>
            <td><%= loan.start_date %></td>
            <td><%= loan.end_date %></td>
            <td><%= loan.date_of_application %></td>
            <td><%= loan.approve_on_date %></td>
            <td><a href="/admin/edit/<%=table %>?id=<%= loan.loan_id %>">Edit</a></td>
        </tr>
        <% }) %>
        <% } %>


        <% if (table == "department") { %>
        <tr>
            <th>department_id</th>
            <th>name</th>
            <th>Edit</th>
        </tr>
        <% tableSQL.forEach((department) => { %>
        <tr>
            <td><%= department.department_id %></td>
            <td><%= department.name %></td>
            <td><a href="/admin/edit/<%=table %>?id=<%= department.department_id %>">Edit</a></td>
        </tr>
        <% }) %>
        <% } %>

        <% if (table == "payment") { %>
        <tr>
            <th>payment_id</th>
            <th>transaction_id</th>
            <th>loan_id</th>
            <th>payment_amount</th>
            <th>interest_rate</th>
            <th>principal_amount</th>
            <th>start_date</th>
            <th>end_date</th>
            <th>payment_frequency</th>
            <th>Edit</th>
        </tr>
        <% tableSQL.forEach((payment) => { %>
        <tr>
            <td><%= payment.payment_id %></td>
            <td><%= payment.transaction_id %></td>
            <td><%= payment.loan_id %></td>
            <td><%= payment.amount %></td>
            <td><%= payment.interest_rate %></td>
            <td><%= payment.principal_amount %></td>
            <td><%= payment.start_date %></td>
            <td><%= payment.end_date %></td>
            <td><%= payment.payment_frequency %></td>
            <td><a href="/admin/edit/<%=table %>?id=<%= payment.payment_id %>">Edit</a></td>
        </tr>
        <% }) %>
        <% } %>

        <% if (table == "transaction_type") { %>
        <tr>
            <th>transaction_type_id</th>
            <th>name</th>
        </tr>
        <% tableSQL.forEach((transaction_type) => { %>
        <tr>
            <td><%= transaction_type.transaction_type_id %></td>
            <td><%= transaction_type.name %></td>
            <td><a href="/admin/edit/<%=table %>?id=<%= transaction_type.transaction_type_id %>">Edit</a></td>
        </tr>
        <% }) %>
        <% } %>

        <% if (table == "access") { %>
        <tr>
            <th>account_id</th>
            <th>accesstype_id</th>
            <th>Edit</th>
            <th>DELETE</th>
        </tr>
        <script>
        function deletingMsg(accountid, accessid){
            locationd = "/delete?accountid=";
            locationd = locationd.concat(accountid);
            message = "Are you sure that you want to delete this?"
            if (confirm("Are you sure that you want to delete this? AccessID: " + accessid + " for AccountID: " + accountid)){
                location.replace("/admin/delete/access?accountid=" + accountid + "&accesstypeid=" + accessid);
            }else{

            }
            
        }
        </script>
        <% tableSQL.forEach((access) => { %>
        <tr>
            <td><%= access.account_id %></td>
            <td><%= access.accesstype_id %></td>
            <td><a href="/admin/edit/<%=table %>?id=<%= access.account_id %>&id2=<%= access.accesstype_id %>">edit</a></td>
            <td><button onclick="deletingMsg(<%= access.account_id %>, <%= access.accesstype_id %>)">Delete</button></td>
        </tr>
        <% }) %>
        <% } %>

        <% if (table == "access_type") { %>
        <tr>
            <th>access_id</th>
            <th>name</th>
            <th>approval_limit</th>
            <th>department_id</th>
            <th>EDIT</th>
            
        </tr>
        <% tableSQL.forEach((access_type) => { %>
        <tr>
            <td><%= access_type.access_id %></td>
            <td><%= access_type.name %></td>
            <td><%= access_type.approval_limit %></td>
            <td><%= access_type.department_id %></td>
            <td><a href="/admin/edit/<%=table %>?id=<%= access_type.access_id %>">Edit</a></td>
            
        </tr>
        <% }) %>
        <% } %>

        <% if (table == "loan_type") { %>
            <tr>
                <th>loan_type_id</th>
                <th>name</th>
                <th>description</th>
                <th>min_amount</th>
                <th>max_amount</th>
                <th>duration</th>
                <th>interest</th>
                <th>last_interest</th>
                <th>department_id</th>
                <th>Edit</th>
            </tr>
            <% tableSQL.forEach((loan_type) => { %>
            <tr>
                <td><%= loan_type.loan_type_id %></td>
                <td><%= loan_type.name %></td>
                <td><%= loan_type.description %></td>
                <td><%= loan_type.min_amount %></td>
                <td><%= loan_type.max_amount %></td>
                <td><%= loan_type.duration %></td>
                <td><%= loan_type.interest %></td>
                <td><%= loan_type.last_interest %></td>
                <td><%= loan_type.department_id %></td>
                <td><a href="/admin/edit/<%=table %>?id=<%= loan_type.access_id %>">Edit</a></td>
            </tr>
            <% }) %>
            <% } %>


    </table>

    <% } %>
</body>

</html>